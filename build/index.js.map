{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../src/providers/AuthProvider.ts","../src/providers/Filter.ts","../src/providers/Pagination.ts","../src/providers/DataProvider.ts","../src/providers/index.ts","../src/components/AmplifyAdmin.tsx","../src/components/AmplifyFilter.tsx"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Auth, CognitoUser } from \"@aws-amplify/auth\";\nimport { ClientMetaData } from \"@aws-amplify/auth/lib-esm/types\";\n\nexport interface AuthProviderOptions {\n  authGroups?: string[];\n}\n\nconst defaultOptions: AuthProviderOptions = {\n  authGroups: [],\n};\n\nexport class AuthProvider {\n  public authGroups: string[];\n\n  public constructor(options: AuthProviderOptions = defaultOptions) {\n    const optionsBag = { ...defaultOptions, ...options };\n\n    this.authGroups = <string[]>optionsBag.authGroups;\n  }\n\n  public login = ({\n    username,\n    password,\n    clientMetadata,\n  }: Record<string, unknown>): Promise<CognitoUser | unknown> => {\n    return Auth.signIn(\n      <string>username,\n      <string>password,\n      <ClientMetaData>clientMetadata\n    );\n  };\n\n  public changePassword = ({\n    user,\n    oldPassword,\n    newPassword,\n    clientMetadata,\n  }: Record<string, unknown>): Promise<string> => {\n    return Auth.changePassword( \n      <CognitoUser>user,\n      <string>oldPassword,\n      <string>newPassword,\n      <ClientMetaData>clientMetadata\n    );\n  };  \n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public logout = (): Promise<any> => {\n    return Auth.signOut();\n  };\n\n  public checkAuth = async (): Promise<void> => {\n    const session = await Auth.currentSession();\n\n    if (this.authGroups.length === 0) {\n      return;\n    }\n\n    const userGroups = session.getAccessToken().decodePayload()[\n      \"cognito:groups\"\n    ];\n\n    if (!userGroups) {\n      throw new Error(\"Unauthorized\");\n    }\n\n    for (const group of userGroups) {\n      if (this.authGroups.includes(group)) {\n        return;\n      }\n    }\n\n    throw new Error(\"Unauthorized\");\n  };\n\n  public checkError = (error: Record<string, unknown>): Promise<void> => {\n    if (error === null || typeof error !== \"object\") {\n      return Promise.resolve();\n    }\n\n    const errors = error.errors;\n\n    if (!errors || !Array.isArray(errors)) {\n      return Promise.resolve();\n    }\n\n    for (const e of errors) {\n      if (e === null || typeof e !== \"object\") {\n        continue;\n      }\n\n      if (e.errorType === \"Unauthorized\") {\n        return Promise.reject();\n      }\n    }\n\n    return Promise.resolve();\n  };\n\n  public getPermissions = async (): Promise<string[]> => {\n    const session = await Auth.currentSession();\n\n    const groups = session.getAccessToken().decodePayload()[\"cognito:groups\"];\n\n    return groups ? Promise.resolve(groups) : Promise.reject();\n  };\n}\n","const sortOperators = [\"eq\", \"le\", \"lt\", \"ge\", \"gt\", \"beginsWith\"];\nconst bannedKeyNames = [\"sortDirection\", \"limit\", \"nextIndex\"];\n\nexport class Filter {\n  static getQueryName(\n    queries: Record<string, string>,\n    filter: Record<string, unknown>\n  ): string | null {\n    if (!this.isObjectOfLength(filter, 1)) {\n      return null;\n    }\n\n    // The filter unique field is the query name\n    const queryName = Object.keys(filter)[0];\n\n    if (!queries[queryName]) {\n      console.log(`Could not find query ${queryName}`);\n      throw new Error(\"Data provider error\");\n    }\n\n    return queryName;\n  }\n\n  static getQueryVariables(\n    filter: Record<string, unknown>\n  ): Record<string, unknown> | null {\n    if (!this.isObjectOfLength(filter, 1)) {\n      return null;\n    }\n\n    const queryParams = Object.values(filter)[0] as Record<string, unknown>;\n\n    for (const bannedKeyName of bannedKeyNames) {\n      delete queryParams[bannedKeyName];\n    }\n\n    // Case when there is only the hash key\n    if (this.isObjectOfLength(queryParams, 1)) {\n      const onlyParam = Object.values(queryParams)[0];\n\n      if (this.isHashKeyValid(onlyParam)) {\n        return queryParams;\n      }\n\n      return null;\n    }\n\n    // Case when there are the hash key and the sort key\n    if (this.isObjectOfLength(queryParams, 2)) {\n      const firstParam = Object.values(queryParams)[0];\n      const secondParam = Object.values(queryParams)[1];\n\n      if (this.isHashKeyValid(firstParam)) {\n        if (this.isSortKeyValid(secondParam)) {\n          return queryParams;\n        }\n\n        return {\n          [Object.keys(queryParams)[0]]: firstParam,\n        };\n      }\n\n      if (this.isHashKeyValid(secondParam)) {\n        if (this.isSortKeyValid(firstParam)) {\n          return queryParams;\n        }\n\n        return {\n          [Object.keys(queryParams)[1]]: secondParam,\n        };\n      }\n    }\n\n    return null;\n  }\n\n  static isObject(obj: unknown): boolean {\n    return obj !== null && typeof obj === \"object\";\n  }\n\n  static isObjectOfLength(obj: unknown, length = 0): boolean {\n    if (!this.isObject(obj)) {\n      return false;\n    }\n\n    return Object.keys(obj as Record<string, unknown>).length === length;\n  }\n\n  static isString(str: unknown): boolean {\n    return typeof str === \"string\" && str !== \"\";\n  }\n\n  static isHashKeyValid(key: unknown): boolean {\n    return this.isString(key) || typeof key === \"number\";\n  }\n\n  static isSortKeyValid(obj: unknown): boolean {\n    if (!this.isObjectOfLength(obj, 1)) {\n      return false;\n    }\n\n    const key = obj as Record<string, unknown>;\n\n    if (!sortOperators.includes(Object.keys(key)[0])) {\n      return false;\n    }\n\n    const keyInput = Object.values(key)[0] as Record<string, unknown>;\n\n    if (this.isHashKeyValid(keyInput)) {\n      return true;\n    }\n\n    if (this.isObject(keyInput) && Object.keys(keyInput).length > 1) {\n      for (const sortField in keyInput) {\n        if (!this.isHashKeyValid(keyInput[sortField])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n}\n","// Stores next token of each query for pagination\n// This is refreshed on each reload\ninterface Tokens {\n  // Query signature\n  [index: string]: Array<string | null | undefined>; // Array of next tokens by page\n}\n\nexport class Pagination {\n  static tokens: Tokens = {};\n\n  static getNextToken(\n    querySignature: string,\n    page: number\n  ): string | null | undefined {\n    // Initialize the array of tokens\n    if (!this.tokens[querySignature]) {\n      this.tokens[querySignature] = [];\n    }\n\n    if (\n      page !== 1 &&\n      typeof this.tokens[querySignature][page - 1] === \"undefined\"\n    ) {\n      return undefined;\n    }\n\n    return this.tokens[querySignature][page - 1] ?? null;\n  }\n\n  static saveNextToken(\n    nextToken: string | null,\n    querySignature: string,\n    page: number\n  ): void {\n    // Initialize the array of tokens\n    if (!this.tokens[querySignature]) {\n      this.tokens[querySignature] = [];\n    }\n\n    this.tokens[querySignature][page] = nextToken;\n  }\n}\n","import { API, GraphQLResult, GRAPHQL_AUTH_MODE } from \"@aws-amplify/api\";\nimport {\n  CreateParams,\n  CreateResult,\n  DeleteManyParams,\n  DeleteManyResult,\n  DeleteParams,\n  DeleteResult,\n  GetListParams,\n  GetListResult,\n  GetManyParams,\n  GetManyReferenceParams,\n  GetManyReferenceResult,\n  GetManyResult,\n  GetOneParams,\n  GetOneResult,\n  UpdateManyParams,\n  UpdateManyResult,\n  UpdateParams,\n  UpdateResult,\n} from \"ra-core\";\nimport { Filter } from \"./Filter\";\nimport { Pagination } from \"./Pagination\";\n\nexport interface Operations {\n  queries: Record<string, string>;\n  mutations: Record<string, string>;\n}\n\nexport interface DataProviderOptions {\n  authMode?: GRAPHQL_AUTH_MODE;\n}\n\nconst defaultOptions: DataProviderOptions = {\n  authMode: GRAPHQL_AUTH_MODE.AMAZON_COGNITO_USER_POOLS,\n};\n\nexport class DataProvider {\n  public queries: Record<string, string>;\n  public mutations: Record<string, string>;\n  public authMode: GRAPHQL_AUTH_MODE;\n\n  public constructor(\n    operations: Operations,\n    options: DataProviderOptions = defaultOptions\n  ) {\n    const optionsBag = { ...defaultOptions, ...options };\n\n    this.queries = operations.queries;\n    this.mutations = operations.mutations;\n    this.authMode = <GRAPHQL_AUTH_MODE>optionsBag.authMode;\n  }\n\n  public getList = async (\n    resource: string,\n    params: GetListParams\n  ): Promise<GetListResult> => {\n    const { filter } = params;\n\n    let queryName = Filter.getQueryName(this.queries, filter);\n    let queryVariables = Filter.getQueryVariables(filter);\n\n    if (!queryName || !queryVariables) {\n      // Default list query without filter\n      queryName = `list${resource.charAt(0).toUpperCase() + resource.slice(1)}`;\n    }\n\n    const query = this.getQuery(queryName);\n\n    if (!queryVariables) {\n      queryVariables = {};\n    }\n\n    const { page, perPage } = params.pagination;\n\n    // Defines a unique identifier of the query\n    const querySignature = JSON.stringify({\n      queryName,\n      queryVariables,\n      perPage,\n    });\n\n    const nextToken = Pagination.getNextToken(querySignature, page);\n\n    // Checks if page requested is out of range\n    if (typeof nextToken === \"undefined\") {\n      return {\n        data: [],\n        total: 0,\n      }; // React admin will redirect to page 1\n    }\n\n    // Adds sorting if requested\n    if (params.sort.field === queryName) {\n      queryVariables[\"sortDirection\"] = params.sort.order;\n    }\n\n    // Executes the query\n    const queryData = (\n      await this.graphql(query, {\n        ...queryVariables,\n        limit: perPage,\n        nextToken,\n      })\n    )[queryName];\n\n    // Saves next token\n    Pagination.saveNextToken(queryData.nextToken, querySignature, page);\n\n    // Computes total\n    let total = (page - 1) * perPage + queryData.items.length;\n    if (queryData.nextToken) {\n      total++; // Tells react admin that there is at least one more page\n    }\n\n    return {\n      data: queryData.items,\n      total,\n    };\n  };\n\n  public getOne = async (\n    resource: string,\n    params: GetOneParams\n  ): Promise<GetOneResult> => {\n    const queryName = `get${\n      resource.charAt(0).toUpperCase() + resource.slice(1, -1)\n    }`;\n    const query = this.getQuery(queryName);\n\n    // Executes the query\n    const queryData = (await this.graphql(query, { id: params.id }))[queryName];\n\n    return {\n      data: queryData,\n    };\n  };\n\n  public getMany = async (\n    resource: string,\n    params: GetManyParams\n  ): Promise<GetManyResult> => {\n    const queryName = `get${\n      resource.charAt(0).toUpperCase() + resource.slice(1, -1)\n    }`;\n    const query = this.getQuery(queryName);\n\n    const queriesData = [];\n\n    // Executes the queries\n    for (const id of params.ids) {\n      try {\n        const queryData = (await this.graphql(query, { id }))[queryName];\n        queriesData.push(queryData);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    return {\n      data: queriesData,\n    };\n  };\n\n  public getManyReference = async (\n    resource: string,\n    params: GetManyReferenceParams\n  ): Promise<GetManyReferenceResult> => {\n    const target = params.target.split(\".\");\n\n    // Target is used to build the filter\n    // It must be like: queryName.resourceID\n    if (target.length !== 2) {\n      throw new Error(\"Data provider error\");\n    }\n\n    const { filter, id, pagination, sort } = params;\n\n    if (!filter[target[0]]) {\n      filter[target[0]] = {};\n    }\n\n    filter[target[0]][target[1]] = id;\n\n    return this.getList(resource, { pagination, sort, filter });\n  };\n\n  public create = async (\n    resource: string,\n    params: CreateParams\n  ): Promise<CreateResult> => {\n    const queryName = `create${\n      resource.charAt(0).toUpperCase() + resource.slice(1, -1)\n    }`;\n    const query = this.getQuery(queryName);\n\n    // Executes the query\n    const queryData = (await this.graphql(query, { input: params.data }))[\n      queryName\n    ];\n\n    return {\n      data: queryData,\n    };\n  };\n\n  public update = async (\n    resource: string,\n    params: UpdateParams\n  ): Promise<UpdateResult> => {\n    const queryName = `update${\n      resource.charAt(0).toUpperCase() + resource.slice(1, -1)\n    }`;\n    const query = this.getQuery(queryName);\n\n    // Removes non editable fields\n    const { data } = params;\n    delete data._deleted;\n    delete data._lastChangedAt;\n    delete data.createdAt;\n    delete data.updatedAt;\n\n    // Executes the query\n    const queryData = (await this.graphql(query, { input: data }))[queryName];\n\n    return {\n      data: queryData,\n    };\n  };\n\n  // This may not work for API that uses DataStore because\n  // DataStore works with a _version field that needs to be properly set\n  public updateMany = async (\n    resource: string,\n    params: UpdateManyParams\n  ): Promise<UpdateManyResult> => {\n    const queryName = `update${\n      resource.charAt(0).toUpperCase() + resource.slice(1, -1)\n    }`;\n    const query = this.getQuery(queryName);\n\n    // Removes non editable fields\n    const { data } = params;\n    delete data._deleted;\n    delete data._lastChangedAt;\n    delete data.createdAt;\n    delete data.updatedAt;\n\n    const ids = [];\n\n    // Executes the queries\n    for (const id of params.ids) {\n      try {\n        await this.graphql(query, { input: { ...data, id } });\n        ids.push(id);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    return {\n      data: ids,\n    };\n  };\n\n  public delete = async (\n    resource: string,\n    params: DeleteParams\n  ): Promise<DeleteResult> => {\n    const queryName = `delete${\n      resource.charAt(0).toUpperCase() + resource.slice(1, -1)\n    }`;\n    const query = this.getQuery(queryName);\n\n    const { id, previousData } = params;\n    const data = { id } as Record<string, unknown>;\n\n    if (previousData._version) {\n      data._version = previousData._version;\n    }\n\n    // Executes the query\n    const queryData = (await this.graphql(query, { input: data }))[queryName];\n\n    return {\n      data: queryData,\n    };\n  };\n\n  public deleteMany = async (\n    resource: string,\n    params: DeleteManyParams\n  ): Promise<DeleteManyResult> => {\n    const queryName = `delete${\n      resource.charAt(0).toUpperCase() + resource.slice(1, -1)\n    }`;\n    const query = this.getQuery(queryName);\n\n    const ids = [];\n\n    // Executes the queries\n    for (const id of params.ids) {\n      try {\n        await this.graphql(query, { input: { id } });\n        ids.push(id);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    return {\n      data: ids,\n    };\n  };\n\n  public getQuery(queryName: string): string {\n    if (this.queries[queryName]) {\n      return this.queries[queryName];\n    }\n\n    if (this.mutations[queryName]) {\n      return this.mutations[queryName];\n    }\n\n    console.log(`Could not find query ${queryName}`);\n\n    throw new Error(\"Data provider error\");\n  }\n\n  public async graphql(\n    query: string,\n    variables: Record<string, unknown>\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ): Promise<any> {\n    const queryResult = <GraphQLResult>await API.graphql({\n      query,\n      variables,\n      authMode: this.authMode,\n    });\n\n    if (queryResult.errors || !queryResult.data) {\n      throw new Error(\"Data provider error\");\n    }\n\n    return queryResult.data;\n  }\n}\n","import {\n  AuthProvider as AuthProviderInterface,\n  DataProvider as DataProviderInterface,\n} from \"ra-core\";\nimport { AuthProvider, AuthProviderOptions } from \"./AuthProvider\";\nimport { DataProvider, DataProviderOptions, Operations } from \"./DataProvider\";\n\nexport function buildAuthProvider(\n  options?: AuthProviderOptions\n): AuthProviderInterface {\n  const authProvider = new AuthProvider(options);\n\n  return {\n    login: authProvider.login,\n    logout: authProvider.logout,\n    checkAuth: authProvider.checkAuth,\n    checkError: authProvider.checkError,\n    getPermissions: authProvider.getPermissions,\n  };\n}\n\nexport function buildDataProvider(\n  operations: Operations,\n  options?: DataProviderOptions\n): DataProviderInterface {\n  const dataProvider = new DataProvider(operations, options);\n\n  return {\n    getList: dataProvider.getList,\n    getOne: dataProvider.getOne,\n    getMany: dataProvider.getMany,\n    getManyReference: dataProvider.getManyReference,\n    create: dataProvider.create,\n    update: dataProvider.update,\n    updateMany: dataProvider.updateMany,\n    delete: dataProvider.delete,\n    deleteMany: dataProvider.deleteMany,\n  };\n}\n","import React from \"react\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { Admin } from \"react-admin\";\nimport { buildAuthProvider, buildDataProvider } from \"../providers\";\nimport { Operations } from \"../providers/DataProvider\";\n\nexport interface AmplifyAdminOptions {\n  authGroups?: string[];\n}\n\nconst defaultOptions: AmplifyAdminOptions = {\n  authGroups: [],\n};\n\nexport const AmplifyAdmin: React.FC<{\n  operations: Operations;\n  options?: AmplifyAdminOptions;\n}> = ({ children, operations, options = defaultOptions, ...propsRest }) => {\n  const optionsBag = { ...defaultOptions, ...options };\n  const authGroups = optionsBag.authGroups as string[];\n\n  return (\n    <Admin\n      {...propsRest}\n      authProvider={buildAuthProvider({ authGroups })}\n      dataProvider={buildDataProvider(operations)}\n    >\n      {children}\n    </Admin>\n  );\n};\n","import React, { useEffect } from \"react\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { Filter } from \"react-admin\";\n\ninterface Keys {\n  [index: string]: {\n    hashKey: string;\n    sortKey: string;\n  };\n}\n\n// Extracts hash and sort keys from source props\nfunction getKeys(filters: React.ReactNodeArray): Keys {\n  const keys = {};\n\n  for (const filter of filters) {\n    if (filter === null || typeof filter !== \"object\") {\n      throw new Error(\"AmplifyFilter children are invalid\");\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const input = filter as any;\n\n    if (!input.props || !input.props.source) {\n      throw new Error(\"AmplifyFilter children are invalid\");\n    }\n\n    const source = input.props.source;\n    const sourceSplit = source.split(\".\");\n\n    // A dot must seperate the query name and the key name\n    if (sourceSplit.length < 2) {\n      throw new Error(\n        `Source ${source} is not valid because a separation dot is missing`\n      );\n    }\n\n    const queryName = sourceSplit[0];\n    const keyName = sourceSplit[1];\n\n    if (!keys[queryName]) {\n      keys[queryName] = {\n        hashKey: \"\",\n        sortKey: \"\",\n      };\n    }\n\n    // Case when there is only the hash key\n    if (sourceSplit.length === 2) {\n      if (keys[queryName].hashKey !== \"\") {\n        throw new Error(\n          `Source ${source} is not valid because hash key is already defined by another input`\n        );\n      }\n\n      keys[queryName].hashKey = keyName;\n\n      continue;\n    }\n\n    keys[queryName].sortKey = keyName;\n  }\n\n  return keys;\n}\n\nexport const AmplifyFilter: React.FC<{\n  defaultQuery: string;\n  setQuery?: React.Dispatch<string>;\n}> = ({ children, defaultQuery, setQuery = null, ...propsRest }) => {\n  let filters;\n\n  if (children !== null && typeof children === \"object\") {\n    filters = [children];\n  }\n\n  if (Array.isArray(children)) {\n    filters = children;\n  }\n\n  if (!filters) {\n    throw new Error(\"AmplifyFilter children are invalid\");\n  }\n\n  // First checks if children source props are well formatted\n  const keys = getKeys(filters);\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const rest = propsRest as any;\n\n  const filterValues = rest.filterValues;\n  const setFilters = rest.setFilters;\n\n  // Determines which query will be executed depending on the filter\n  let query = defaultQuery;\n  if (Object.keys(filterValues).length === 1) {\n    query = Object.keys(filterValues)[0];\n\n    const filterHashKey = filterValues[query][keys[query].hashKey];\n\n    // Case when filter values do not contain mandatory hash key\n    if (!filterHashKey && setFilters) {\n      setFilters({});\n    }\n  }\n\n  // Tells the list component about the query in order to know which fields are sortable\n  useEffect(() => {\n    setQuery && setQuery(query);\n  }, [query, setQuery]);\n\n  function showFilter(queryName: string) {\n    return query === defaultQuery || query === queryName;\n  }\n\n  // Checks if filter has a value\n  function notBlank(filter: string) {\n    return !!filter.split(\".\").reduce((o, i) => (!o ? o : o[i]), filterValues);\n  }\n\n  function renderInput(filter: React.ReactNode) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const input = filter as any;\n\n    const source = input.props.source;\n    const sourceSplit = source.split(\".\");\n\n    const queryName = sourceSplit[0];\n\n    if (sourceSplit.length === 2) {\n      return showFilter(queryName) && input;\n    }\n\n    const hashKeySource = `${queryName}.${keys[queryName].hashKey}`;\n\n    return showFilter(queryName) && notBlank(hashKeySource) && input;\n  }\n\n  return <Filter {...rest}>{filters.map(renderInput)}</Filter>;\n};\n"],"names":["Auth","defaultOptions","GRAPHQL_AUTH_MODE","API","React","Admin","useEffect","Filter"],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAeA;AACO,IAAI,QAAQ,GAAG,WAAW;AACjC,IAAI,QAAQ,GAAG,MAAM,CAAC,MAAM,IAAI,SAAS,QAAQ,CAAC,CAAC,EAAE;AACrD,QAAQ,KAAK,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AAC7D,YAAY,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;AAC7B,YAAY,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACzF,SAAS;AACT,QAAQ,OAAO,CAAC,CAAC;AACjB,MAAK;AACL,IAAI,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;AAC3C,EAAC;AACD;AACO,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE;AAC7B,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC;AACf,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;AACvF,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,OAAO,MAAM,CAAC,qBAAqB,KAAK,UAAU;AACvE,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChF,YAAY,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1F,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAClC,SAAS;AACT,IAAI,OAAO,CAAC,CAAC;AACb,CAAC;AAgBD;AACO,SAAS,SAAS,CAAC,OAAO,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE;AAC7D,IAAI,SAAS,KAAK,CAAC,KAAK,EAAE,EAAE,OAAO,KAAK,YAAY,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC,UAAU,OAAO,EAAE,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;AAChH,IAAI,OAAO,KAAK,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,EAAE,UAAU,OAAO,EAAE,MAAM,EAAE;AAC/D,QAAQ,SAAS,SAAS,CAAC,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;AACnG,QAAQ,SAAS,QAAQ,CAAC,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;AACtG,QAAQ,SAAS,IAAI,CAAC,MAAM,EAAE,EAAE,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,EAAE;AACtH,QAAQ,IAAI,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9E,KAAK,CAAC,CAAC;AACP,CAAC;AACD;AACO,SAAS,WAAW,CAAC,OAAO,EAAE,IAAI,EAAE;AAC3C,IAAI,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACrH,IAAI,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,OAAO,MAAM,KAAK,UAAU,KAAK,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,WAAW,EAAE,OAAO,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAC7J,IAAI,SAAS,IAAI,CAAC,CAAC,EAAE,EAAE,OAAO,UAAU,CAAC,EAAE,EAAE,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;AACtE,IAAI,SAAS,IAAI,CAAC,EAAE,EAAE;AACtB,QAAQ,IAAI,CAAC,EAAE,MAAM,IAAI,SAAS,CAAC,iCAAiC,CAAC,CAAC;AACtE,QAAQ,OAAO,CAAC,EAAE,IAAI;AACtB,YAAY,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;AACzK,YAAY,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC;AACpD,YAAY,QAAQ,EAAE,CAAC,CAAC,CAAC;AACzB,gBAAgB,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,MAAM;AAC9C,gBAAgB,KAAK,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;AACxE,gBAAgB,KAAK,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS;AACjE,gBAAgB,KAAK,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,SAAS;AACjE,gBAAgB;AAChB,oBAAoB,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,EAAE;AAChI,oBAAoB,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE;AAC1G,oBAAoB,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,MAAM,EAAE;AACzF,oBAAoB,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,EAAE;AACvF,oBAAoB,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AAC1C,oBAAoB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,SAAS;AAC3C,aAAa;AACb,YAAY,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;AACvC,SAAS,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;AAClE,QAAQ,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;AACzF,KAAK;AACL;;AChGA,IAAM,cAAc,GAAwB;IAC1C,UAAU,EAAE,EAAE;CACf,CAAC;AAEF;IAGE,sBAAmB,OAA6C;QAAhE,iBAIC;QAJkB,wBAAA,EAAA,wBAA6C;QAMzD,UAAK,GAAG,UAAC,EAIU;gBAHxB,QAAQ,cAAA,EACR,QAAQ,cAAA,EACR,cAAc,oBAAA;YAEd,OAAOA,SAAI,CAAC,MAAM,CACR,QAAQ,EACR,QAAQ,EACA,cAAc,CAC/B,CAAC;SACH,CAAC;QAEK,mBAAc,GAAG,UAAC,EAKC;gBAJxB,IAAI,UAAA,EACJ,WAAW,iBAAA,EACX,WAAW,iBAAA,EACX,cAAc,oBAAA;YAEd,OAAOA,SAAI,CAAC,cAAc,CACX,IAAI,EACT,WAAW,EACX,WAAW,EACH,cAAc,CAC/B,CAAC;SACH,CAAC;;QAGK,WAAM,GAAG;YACd,OAAOA,SAAI,CAAC,OAAO,EAAE,CAAC;SACvB,CAAC;QAEK,cAAS,GAAG;;;;4BACD,qBAAMA,SAAI,CAAC,cAAc,EAAE,EAAA;;wBAArC,OAAO,GAAG,SAA2B;wBAE3C,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;4BAChC,sBAAO;yBACR;wBAEK,UAAU,GAAG,OAAO,CAAC,cAAc,EAAE,CAAC,aAAa,EAAE,CACzD,gBAAgB,CACjB,CAAC;wBAEF,IAAI,CAAC,UAAU,EAAE;4BACf,MAAM,IAAI,KAAK,CAAC,cAAc,CAAC,CAAC;yBACjC;wBAED,WAA8B,EAAV,yBAAU,EAAV,wBAAU,EAAV,IAAU,EAAE;4BAArB,KAAK;4BACd,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;gCACnC,sBAAO;6BACR;yBACF;wBAED,MAAM,IAAI,KAAK,CAAC,cAAc,CAAC,CAAC;;;aACjC,CAAC;QAEK,eAAU,GAAG,UAAC,KAA8B;YACjD,IAAI,KAAK,KAAK,IAAI,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;gBAC/C,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;aAC1B;YAED,IAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;YAE5B,IAAI,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBACrC,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;aAC1B;YAED,KAAgB,UAAM,EAAN,iBAAM,EAAN,oBAAM,EAAN,IAAM,EAAE;gBAAnB,IAAM,CAAC,eAAA;gBACV,IAAI,CAAC,KAAK,IAAI,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE;oBACvC,SAAS;iBACV;gBAED,IAAI,CAAC,CAAC,SAAS,KAAK,cAAc,EAAE;oBAClC,OAAO,OAAO,CAAC,MAAM,EAAE,CAAC;iBACzB;aACF;YAED,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;SAC1B,CAAC;QAEK,mBAAc,GAAG;;;;4BACN,qBAAMA,SAAI,CAAC,cAAc,EAAE,EAAA;;wBAArC,OAAO,GAAG,SAA2B;wBAErC,MAAM,GAAG,OAAO,CAAC,cAAc,EAAE,CAAC,aAAa,EAAE,CAAC,gBAAgB,CAAC,CAAC;wBAE1E,sBAAO,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,EAAC;;;aAC5D,CAAC;QA1FA,IAAM,UAAU,yBAAQ,cAAc,GAAK,OAAO,CAAE,CAAC;QAErD,IAAI,CAAC,UAAU,GAAa,UAAU,CAAC,UAAU,CAAC;KACnD;IAwFH,mBAAC;AAAD,CAAC;;AC1GD,IAAM,aAAa,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY,CAAC,CAAC;AACnE,IAAM,cAAc,GAAG,CAAC,eAAe,EAAE,OAAO,EAAE,WAAW,CAAC,CAAC;AAE/D;IAAA;KA0HC;IAzHQ,mBAAY,GAAnB,UACE,OAA+B,EAC/B,MAA+B;QAE/B,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE;YACrC,OAAO,IAAI,CAAC;SACb;;QAGD,IAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAEzC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;YACvB,OAAO,CAAC,GAAG,CAAC,0BAAwB,SAAW,CAAC,CAAC;YACjD,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;SACxC;QAED,OAAO,SAAS,CAAC;KAClB;IAEM,wBAAiB,GAAxB,UACE,MAA+B;;QAE/B,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE;YACrC,OAAO,IAAI,CAAC;SACb;QAED,IAAM,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAA4B,CAAC;QAExE,KAA4B,UAAc,EAAd,iCAAc,EAAd,4BAAc,EAAd,IAAc,EAAE;YAAvC,IAAM,aAAa,uBAAA;YACtB,OAAO,WAAW,CAAC,aAAa,CAAC,CAAC;SACnC;;QAGD,IAAI,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE;YACzC,IAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAEhD,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;gBAClC,OAAO,WAAW,CAAC;aACpB;YAED,OAAO,IAAI,CAAC;SACb;;QAGD,IAAI,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE;YACzC,IAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YACjD,IAAM,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAElD,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE;gBACnC,IAAI,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE;oBACpC,OAAO,WAAW,CAAC;iBACpB;gBAED;oBACE,GAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAG,UAAU;uBACzC;aACH;YAED,IAAI,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE;gBACpC,IAAI,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE;oBACnC,OAAO,WAAW,CAAC;iBACpB;gBAED;oBACE,GAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAG,WAAW;uBAC1C;aACH;SACF;QAED,OAAO,IAAI,CAAC;KACb;IAEM,eAAQ,GAAf,UAAgB,GAAY;QAC1B,OAAO,GAAG,KAAK,IAAI,IAAI,OAAO,GAAG,KAAK,QAAQ,CAAC;KAChD;IAEM,uBAAgB,GAAvB,UAAwB,GAAY,EAAE,MAAU;QAAV,uBAAA,EAAA,UAAU;QAC9C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YACvB,OAAO,KAAK,CAAC;SACd;QAED,OAAO,MAAM,CAAC,IAAI,CAAC,GAA8B,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC;KACtE;IAEM,eAAQ,GAAf,UAAgB,GAAY;QAC1B,OAAO,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,KAAK,EAAE,CAAC;KAC9C;IAEM,qBAAc,GAArB,UAAsB,GAAY;QAChC,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,OAAO,GAAG,KAAK,QAAQ,CAAC;KACtD;IAEM,qBAAc,GAArB,UAAsB,GAAY;QAChC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE;YAClC,OAAO,KAAK,CAAC;SACd;QAED,IAAM,GAAG,GAAG,GAA8B,CAAC;QAE3C,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YAChD,OAAO,KAAK,CAAC;SACd;QAED,IAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAA4B,CAAC;QAElE,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;YACjC,OAAO,IAAI,CAAC;SACb;QAED,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;YAC/D,KAAK,IAAM,SAAS,IAAI,QAAQ,EAAE;gBAChC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE;oBAC7C,OAAO,KAAK,CAAC;iBACd;aACF;YAED,OAAO,IAAI,CAAC;SACb;QAED,OAAO,KAAK,CAAC;KACd;IACH,aAAC;AAAD,CAAC;;ACtHD;IAAA;KAkCC;IA/BQ,uBAAY,GAAnB,UACE,cAAsB,EACtB,IAAY;;;QAGZ,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE;YAChC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;SAClC;QAED,IACE,IAAI,KAAK,CAAC;YACV,OAAO,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,KAAK,WAAW,EAC5D;YACA,OAAO,SAAS,CAAC;SAClB;QAED,aAAO,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,mCAAI,IAAI,CAAC;KACtD;IAEM,wBAAa,GAApB,UACE,SAAwB,EACxB,cAAsB,EACtB,IAAY;;QAGZ,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE;YAChC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;SAClC;QAED,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC;KAC/C;IAhCM,iBAAM,GAAW,EAAE,CAAC;IAiC7B,iBAAC;CAlCD;;AC0BA,IAAMC,gBAAc,GAAwB;IAC1C,QAAQ,EAAEC,qBAAiB,CAAC,yBAAyB;CACtD,CAAC;AAEF;IAKE,sBACE,UAAsB,EACtB,OAA6C;QAF/C,iBASC;QAPC,wBAAA,EAAA,0BAA6C;QASxC,YAAO,GAAG,UACf,QAAgB,EAChB,MAAqB;;;;;wBAEb,MAAM,GAAK,MAAM,OAAX,CAAY;wBAEtB,SAAS,GAAG,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;wBACtD,cAAc,GAAG,MAAM,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;wBAEtD,IAAI,CAAC,SAAS,IAAI,CAAC,cAAc,EAAE;;4BAEjC,SAAS,GAAG,UAAO,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAE,CAAC;yBAC3E;wBAEK,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;wBAEvC,IAAI,CAAC,cAAc,EAAE;4BACnB,cAAc,GAAG,EAAE,CAAC;yBACrB;wBAEK,KAAoB,MAAM,CAAC,UAAU,EAAnC,IAAI,UAAA,EAAE,OAAO,aAAA,CAAuB;wBAGtC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC;4BACpC,SAAS,WAAA;4BACT,cAAc,gBAAA;4BACd,OAAO,SAAA;yBACR,CAAC,CAAC;wBAEG,SAAS,GAAG,UAAU,CAAC,YAAY,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;;wBAGhE,IAAI,OAAO,SAAS,KAAK,WAAW,EAAE;4BACpC,sBAAO;oCACL,IAAI,EAAE,EAAE;oCACR,KAAK,EAAE,CAAC;iCACT,EAAC;yBACH;;wBAGD,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE;4BACnC,cAAc,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;yBACrD;wBAIC,qBAAM,IAAI,CAAC,OAAO,CAAC,KAAK,wBACnB,cAAc,KACjB,KAAK,EAAE,OAAO,EACd,SAAS,WAAA,IACT,EAAA;;wBALE,SAAS,GAAG,CAChB,SAIE,EACF,SAAS,CAAC;;wBAGZ,UAAU,CAAC,aAAa,CAAC,SAAS,CAAC,SAAS,EAAE,cAAc,EAAE,IAAI,CAAC,CAAC;wBAGhE,KAAK,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,OAAO,GAAG,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC;wBAC1D,IAAI,SAAS,CAAC,SAAS,EAAE;4BACvB,KAAK,EAAE,CAAC;yBACT;wBAED,sBAAO;gCACL,IAAI,EAAE,SAAS,CAAC,KAAK;gCACrB,KAAK,OAAA;6BACN,EAAC;;;aACH,CAAC;QAEK,WAAM,GAAG,UACd,QAAgB,EAChB,MAAoB;;;;;wBAEd,SAAS,GAAG,SAChB,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CACxD,CAAC;wBACG,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;wBAGpB,qBAAM,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,EAAA;;wBAAzD,SAAS,GAAG,CAAC,SAA4C,EAAE,SAAS,CAAC;wBAE3E,sBAAO;gCACL,IAAI,EAAE,SAAS;6BAChB,EAAC;;;aACH,CAAC;QAEK,YAAO,GAAG,UACf,QAAgB,EAChB,MAAqB;;;;;wBAEf,SAAS,GAAG,SAChB,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CACxD,CAAC;wBACG,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;wBAEjC,WAAW,GAAG,EAAE,CAAC;8BAGI,EAAV,KAAA,MAAM,CAAC,GAAG;;;8BAAV,cAAU,CAAA;wBAAhB,EAAE;;;;wBAEU,qBAAM,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,EAAE,IAAA,EAAE,CAAC,EAAA;;wBAA9C,SAAS,GAAG,CAAC,SAAiC,EAAE,SAAS,CAAC;wBAChE,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;;;wBAE5B,OAAO,CAAC,GAAG,CAAC,GAAC,CAAC,CAAC;;;wBALF,IAAU,CAAA;;4BAS3B,sBAAO;4BACL,IAAI,EAAE,WAAW;yBAClB,EAAC;;;aACH,CAAC;QAEK,qBAAgB,GAAG,UACxB,QAAgB,EAChB,MAA8B;;;gBAExB,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;;;gBAIxC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;oBACvB,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;iBACxC;gBAEO,MAAM,GAA2B,MAAM,OAAjC,EAAE,EAAE,GAAuB,MAAM,GAA7B,EAAE,UAAU,GAAW,MAAM,WAAjB,EAAE,IAAI,GAAK,MAAM,KAAX,CAAY;gBAEhD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE;oBACtB,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;iBACxB;gBAED,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;gBAElC,sBAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,UAAU,YAAA,EAAE,IAAI,MAAA,EAAE,MAAM,QAAA,EAAE,CAAC,EAAC;;aAC7D,CAAC;QAEK,WAAM,GAAG,UACd,QAAgB,EAChB,MAAoB;;;;;wBAEd,SAAS,GAAG,YAChB,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CACxD,CAAC;wBACG,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;wBAGpB,qBAAM,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,EAAA;;wBAA9D,SAAS,GAAG,CAAC,SAAiD,EAClE,SAAS,CACV;wBAED,sBAAO;gCACL,IAAI,EAAE,SAAS;6BAChB,EAAC;;;aACH,CAAC;QAEK,WAAM,GAAG,UACd,QAAgB,EAChB,MAAoB;;;;;wBAEd,SAAS,GAAG,YAChB,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CACxD,CAAC;wBACG,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;wBAG/B,IAAI,GAAK,MAAM,KAAX,CAAY;wBACxB,OAAO,IAAI,CAAC,QAAQ,CAAC;wBACrB,OAAO,IAAI,CAAC,cAAc,CAAC;wBAC3B,OAAO,IAAI,CAAC,SAAS,CAAC;wBACtB,OAAO,IAAI,CAAC,SAAS,CAAC;wBAGH,qBAAM,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,EAAA;;wBAAvD,SAAS,GAAG,CAAC,SAA0C,EAAE,SAAS,CAAC;wBAEzE,sBAAO;gCACL,IAAI,EAAE,SAAS;6BAChB,EAAC;;;aACH,CAAC;;;QAIK,eAAU,GAAG,UAClB,QAAgB,EAChB,MAAwB;;;;;wBAElB,SAAS,GAAG,YAChB,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CACxD,CAAC;wBACG,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;wBAG/B,IAAI,GAAK,MAAM,KAAX,CAAY;wBACxB,OAAO,IAAI,CAAC,QAAQ,CAAC;wBACrB,OAAO,IAAI,CAAC,cAAc,CAAC;wBAC3B,OAAO,IAAI,CAAC,SAAS,CAAC;wBACtB,OAAO,IAAI,CAAC,SAAS,CAAC;wBAEhB,GAAG,GAAG,EAAE,CAAC;8BAGY,EAAV,KAAA,MAAM,CAAC,GAAG;;;8BAAV,cAAU,CAAA;wBAAhB,EAAE;;;;wBAET,qBAAM,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,KAAK,wBAAO,IAAI,KAAE,EAAE,IAAA,GAAE,EAAE,CAAC,EAAA;;wBAArD,SAAqD,CAAC;wBACtD,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;;;wBAEb,OAAO,CAAC,GAAG,CAAC,GAAC,CAAC,CAAC;;;wBALF,IAAU,CAAA;;4BAS3B,sBAAO;4BACL,IAAI,EAAE,GAAG;yBACV,EAAC;;;aACH,CAAC;QAEK,WAAM,GAAG,UACd,QAAgB,EAChB,MAAoB;;;;;wBAEd,SAAS,GAAG,YAChB,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CACxD,CAAC;wBACG,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;wBAE/B,EAAE,GAAmB,MAAM,GAAzB,EAAE,YAAY,GAAK,MAAM,aAAX,CAAY;wBAC9B,IAAI,GAAG,EAAE,EAAE,IAAA,EAA6B,CAAC;wBAE/C,IAAI,YAAY,CAAC,QAAQ,EAAE;4BACzB,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC,QAAQ,CAAC;yBACvC;wBAGkB,qBAAM,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,EAAA;;wBAAvD,SAAS,GAAG,CAAC,SAA0C,EAAE,SAAS,CAAC;wBAEzE,sBAAO;gCACL,IAAI,EAAE,SAAS;6BAChB,EAAC;;;aACH,CAAC;QAEK,eAAU,GAAG,UAClB,QAAgB,EAChB,MAAwB;;;;;wBAElB,SAAS,GAAG,YAChB,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CACxD,CAAC;wBACG,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;wBAEjC,GAAG,GAAG,EAAE,CAAC;8BAGY,EAAV,KAAA,MAAM,CAAC,GAAG;;;8BAAV,cAAU,CAAA;wBAAhB,EAAE;;;;wBAET,qBAAM,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,IAAA,EAAE,EAAE,CAAC,EAAA;;wBAA5C,SAA4C,CAAC;wBAC7C,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;;;wBAEb,OAAO,CAAC,GAAG,CAAC,GAAC,CAAC,CAAC;;;wBALF,IAAU,CAAA;;4BAS3B,sBAAO;4BACL,IAAI,EAAE,GAAG;yBACV,EAAC;;;aACH,CAAC;QA3QA,IAAM,UAAU,yBAAQD,gBAAc,GAAK,OAAO,CAAE,CAAC;QAErD,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC;QAClC,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC,SAAS,CAAC;QACtC,IAAI,CAAC,QAAQ,GAAsB,UAAU,CAAC,QAAQ,CAAC;KACxD;IAwQM,+BAAQ,GAAf,UAAgB,SAAiB;QAC/B,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;YAC3B,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SAChC;QAED,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE;YAC7B,OAAO,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;SAClC;QAED,OAAO,CAAC,GAAG,CAAC,0BAAwB,SAAW,CAAC,CAAC;QAEjD,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;KACxC;IAEY,8BAAO,GAApB,UACE,KAAa,EACb,SAAkC;;;;;;;4BAGC,qBAAME,OAAG,CAAC,OAAO,CAAC;4BACnD,KAAK,OAAA;4BACL,SAAS,WAAA;4BACT,QAAQ,EAAE,IAAI,CAAC,QAAQ;yBACxB,CAAC,EAAA;;wBAJI,WAAW,GAAkB,SAIjC;wBAEF,IAAI,WAAW,CAAC,MAAM,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE;4BAC3C,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;yBACxC;wBAED,sBAAO,WAAW,CAAC,IAAI,EAAC;;;;KACzB;IACH,mBAAC;AAAD,CAAC;;SCnVe,iBAAiB,CAC/B,OAA6B;IAE7B,IAAM,YAAY,GAAG,IAAI,YAAY,CAAC,OAAO,CAAC,CAAC;IAE/C,OAAO;QACL,KAAK,EAAE,YAAY,CAAC,KAAK;QACzB,MAAM,EAAE,YAAY,CAAC,MAAM;QAC3B,SAAS,EAAE,YAAY,CAAC,SAAS;QACjC,UAAU,EAAE,YAAY,CAAC,UAAU;QACnC,cAAc,EAAE,YAAY,CAAC,cAAc;KAC5C,CAAC;AACJ,CAAC;SAEe,iBAAiB,CAC/B,UAAsB,EACtB,OAA6B;IAE7B,IAAM,YAAY,GAAG,IAAI,YAAY,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;IAE3D,OAAO;QACL,OAAO,EAAE,YAAY,CAAC,OAAO;QAC7B,MAAM,EAAE,YAAY,CAAC,MAAM;QAC3B,OAAO,EAAE,YAAY,CAAC,OAAO;QAC7B,gBAAgB,EAAE,YAAY,CAAC,gBAAgB;QAC/C,MAAM,EAAE,YAAY,CAAC,MAAM;QAC3B,MAAM,EAAE,YAAY,CAAC,MAAM;QAC3B,UAAU,EAAE,YAAY,CAAC,UAAU;QACnC,MAAM,EAAE,YAAY,CAAC,MAAM;QAC3B,UAAU,EAAE,YAAY,CAAC,UAAU;KACpC,CAAC;AACJ;;AC5BA,IAAMF,gBAAc,GAAwB;IAC1C,UAAU,EAAE,EAAE;CACf,CAAC;IAEW,YAAY,GAGpB,UAAC,EAAgE;IAA9D,IAAA,QAAQ,cAAA,EAAE,UAAU,gBAAA,EAAE,eAAwB,EAAxB,OAAO,mBAAGA,gBAAc,KAAA,EAAK,SAAS,cAA9D,qCAAgE,CAAF;IAClE,IAAM,UAAU,yBAAQA,gBAAc,GAAK,OAAO,CAAE,CAAC;IACrD,IAAM,UAAU,GAAG,UAAU,CAAC,UAAsB,CAAC;IAErD,QACEG,6BAACC,gBAAK,eACA,SAAS,IACb,YAAY,EAAE,iBAAiB,CAAC,EAAE,UAAU,YAAA,EAAE,CAAC,EAC/C,YAAY,EAAE,iBAAiB,CAAC,UAAU,CAAC,KAE1C,QAAQ,CACH,EACR;AACJ;;ACnBA;AACA,SAAS,OAAO,CAAC,OAA6B;IAC5C,IAAM,IAAI,GAAG,EAAE,CAAC;IAEhB,KAAqB,UAAO,EAAP,mBAAO,EAAP,qBAAO,EAAP,IAAO,EAAE;QAAzB,IAAM,MAAM,gBAAA;QACf,IAAI,MAAM,KAAK,IAAI,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;YACjD,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;SACvD;;QAGD,IAAM,KAAK,GAAG,MAAa,CAAC;QAE5B,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,EAAE;YACvC,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;SACvD;QAED,IAAM,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC;QAClC,IAAM,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;;QAGtC,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1B,MAAM,IAAI,KAAK,CACb,YAAU,MAAM,sDAAmD,CACpE,CAAC;SACH;QAED,IAAM,SAAS,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;QACjC,IAAM,OAAO,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;QAE/B,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;YACpB,IAAI,CAAC,SAAS,CAAC,GAAG;gBAChB,OAAO,EAAE,EAAE;gBACX,OAAO,EAAE,EAAE;aACZ,CAAC;SACH;;QAGD,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;YAC5B,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,OAAO,KAAK,EAAE,EAAE;gBAClC,MAAM,IAAI,KAAK,CACb,YAAU,MAAM,uEAAoE,CACrF,CAAC;aACH;YAED,IAAI,CAAC,SAAS,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC;YAElC,SAAS;SACV;QAED,IAAI,CAAC,SAAS,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC;KACnC;IAED,OAAO,IAAI,CAAC;AACd,CAAC;IAEY,aAAa,GAGrB,UAAC,EAAyD;IAAvD,IAAA,QAAQ,cAAA,EAAE,YAAY,kBAAA,EAAE,gBAAe,EAAf,QAAQ,mBAAG,IAAI,KAAA,EAAK,SAAS,cAAvD,wCAAyD,CAAF;IAC3D,IAAI,OAAO,CAAC;IAEZ,IAAI,QAAQ,KAAK,IAAI,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;QACrD,OAAO,GAAG,CAAC,QAAQ,CAAC,CAAC;KACtB;IAED,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;QAC3B,OAAO,GAAG,QAAQ,CAAC;KACpB;IAED,IAAI,CAAC,OAAO,EAAE;QACZ,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;KACvD;;IAGD,IAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;;IAG9B,IAAM,IAAI,GAAG,SAAgB,CAAC;IAE9B,IAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;IACvC,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;;IAGnC,IAAI,KAAK,GAAG,YAAY,CAAC;IACzB,IAAI,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;QAC1C,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;QAErC,IAAM,aAAa,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC;;QAG/D,IAAI,CAAC,aAAa,IAAI,UAAU,EAAE;YAChC,UAAU,CAAC,EAAE,CAAC,CAAC;SAChB;KACF;;IAGDC,eAAS,CAAC;QACR,QAAQ,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC;KAC7B,EAAE,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;IAEtB,SAAS,UAAU,CAAC,SAAiB;QACnC,OAAO,KAAK,KAAK,YAAY,IAAI,KAAK,KAAK,SAAS,CAAC;KACtD;;IAGD,SAAS,QAAQ,CAAC,MAAc;QAC9B,OAAO,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,QAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAC,EAAE,YAAY,CAAC,CAAC;KAC5E;IAED,SAAS,WAAW,CAAC,MAAuB;;QAE1C,IAAM,KAAK,GAAG,MAAa,CAAC;QAE5B,IAAM,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC;QAClC,IAAM,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAEtC,IAAM,SAAS,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;QAEjC,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;YAC5B,OAAO,UAAU,CAAC,SAAS,CAAC,IAAI,KAAK,CAAC;SACvC;QAED,IAAM,aAAa,GAAM,SAAS,SAAI,IAAI,CAAC,SAAS,CAAC,CAAC,OAAS,CAAC;QAEhE,OAAO,UAAU,CAAC,SAAS,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC;KAClE;IAED,OAAOF,6BAACG,iBAAM,eAAK,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAU,CAAC;AAC/D;;;;;;;"}